<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="NodeStudy"><meta name="keywords" content="Node"><meta name="author" content="ğ“£ğ“ªğ“­ğ“¶"><meta name="copyright" content="ğ“£ğ“ªğ“­ğ“¶"><title>NodeStudy | ğ“£ğ“ªğ“­ğ“¶'s Blog</title><link rel="shortcut icon" href="/my.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.0/css/all.min.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?837ab5c6a751430eeba265f36e622b79";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-156561044-1","auto"),ga("send","pageview")</script><meta name="google-site-verification" content="4sNQ8r3e8C-DeXTBdbDP38MgpMP8Rw5pvHy2z4-z9ZY"><script>var GLOBAL_CONFIG={root:"/",copy:{success:"Copy successfully",error:"Copy error",noSupport:"The browser does not support"}}</script><meta name="generator" content="Hexo 4.2.1"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#NODE"><span class="toc-number">1.</span> <span class="toc-text">NODE</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Explanation"><span class="toc-number">2.</span> <span class="toc-text">Explanation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Usage"><span class="toc-number">3.</span> <span class="toc-text">Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-NODE"><span class="toc-number">3.1.</span> <span class="toc-text">Hello NODE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#require"><span class="toc-number">3.2.</span> <span class="toc-text">require</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exports-amp-module-exports"><span class="toc-number">3.3.</span> <span class="toc-text">exports &amp; module.exports</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Read-Write-File"><span class="toc-number">3.4.</span> <span class="toc-text">Read || Write File</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Http"><span class="toc-number">3.5.</span> <span class="toc-text">Http</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Express"><span class="toc-number">4.</span> <span class="toc-text">Express</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Install"><span class="toc-number">4.1.</span> <span class="toc-text">Install</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage-1"><span class="toc-number">4.2.</span> <span class="toc-text">Usage</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nodemon"><span class="toc-number">4.3.</span> <span class="toc-text">Nodemon</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-1"><span class="toc-number">4.3.1.</span> <span class="toc-text">Install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Usage-2"><span class="toc-number">4.3.2.</span> <span class="toc-text">Usage</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#POST"><span class="toc-number">4.4.</span> <span class="toc-text">POST</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#app-useï¼ˆ-pathï¼Œ-callback-ï¼Œcallback-â€¦-ï¼‰"><span class="toc-number">4.5.</span> <span class="toc-text">app.useï¼ˆ[pathï¼Œ] callback [ï¼Œcallback â€¦]ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Small-Demo"><span class="toc-number">4.6.</span> <span class="toc-text">Small Demo</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MongoDB"><span class="toc-number">5.</span> <span class="toc-text">MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-World"><span class="toc-number">5.1.</span> <span class="toc-text">Hello World</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CRUD"><span class="toc-number">5.2.</span> <span class="toc-text">CRUD</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL"><span class="toc-number">6.</span> <span class="toc-text">MySQL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Promise"><span class="toc-number">7.</span> <span class="toc-text">Promise</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Node-è·¯å¾„é—®é¢˜"><span class="toc-number">8.</span> <span class="toc-text">Node è·¯å¾„é—®é¢˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Express-session"><span class="toc-number">9.</span> <span class="toc-text">Express-session</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://i.loli.net/2019/11/24/Tj4hPoFKgXJE7xW.jpg"></div><div class="author-info__name text-center">ğ“£ğ“ªğ“­ğ“¶</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://liuhongwei3.github.io">Follow me â‰§â—‡â‰¦</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">31</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">35</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">11</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://liuhongwei3.github.io">ğ“£ğ“ªğ“­ğ“¶</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image:url(https://i.loli.net/2020/02/28/2OPSFfaL73QIizV.jpg)"><div id="page-header"> <span class="pull-left"><a id="site-name" href="/">ğ“£ğ“ªğ“­ğ“¶'s Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i> <span class="pull-right menus"><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/player">Player</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">NodeStudy</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-21</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/studyNotes/">studyNotes</a><div class="post-meta-wordcount"><span>Word count:</span> <span class="word-count">5.7k</span><span class="post-meta__separator">|</span><span>Reading time: 30 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><!DOCTYPE html><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><div id="aplayer"></div><script type="text/javascript" src="/js/aplayer.js"></script><div class="article-container" id="post-content"><h1 id="NODE"><a href="#NODE" class="headerlink" title="NODE"></a>NODE</h1><p>å®˜ç½‘ï¼š<a href="https://nodejs.org/en/" target="_blank" rel="noopener">NODE</a></p><h1 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h1><blockquote><p>Node.jsÂ® is a JavaScript runtime built on <a href="https://v8.dev/" target="_blank" rel="noopener">Chromeâ€™s V8 JavaScript engine</a>.</p></blockquote><p>ç”±å®˜æ–¹å®šä¹‰äº¦çŸ¥ï¼š<strong>Node.js</strong> ä¸æ˜¯ä¸€é—¨è¯­è¨€ï¼Œä¹Ÿä¸æ˜¯ç±»ä¼¼äºVueã€Reactè¿™äº›æ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ä¸ª</p><p>èƒ½å¤Ÿè¿è¡Œ <strong>JS</strong> çš„<strong>è¿è¡Œç¯å¢ƒ</strong>ã€‚</p><p><strong>Features:</strong></p><ul><li>äº‹ä»¶é©±åŠ¨</li><li>éé˜»å¡ I/O æ¨¡å‹ï¼ˆå¼‚æ­¥ï¼‰</li><li>è½»é‡å’Œé«˜æ•ˆ</li><li>æ–‡ä»¶æ“ä½œ</li><li>ç½‘ç»œæ•°æ®æ“ä½œï¼ˆhttp/httpsï¼‰</li></ul><p>Applyï¼š<a href="https://www.npmjs.com/" target="_blank" rel="noopener">NPM</a> åŒ…ç®¡ç†å·¥å…·ï¼ˆnpm install xxxï¼‰</p><p>Node ä¸­<strong>ä¸å­˜åœ¨ BOM &amp; DOM</strong></p><p>ç¯å¢ƒæ­å»ºç›´æ¥å»<a href="https://nodejs.org/" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬å³å¯ï¼Œä¸å†é™ˆè¿°ã€‚</p><h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><p>å…ˆæ¥ä¸ªç®€å•çš„ <a href="https://www.nodebeginner.org/index-zh-cn" target="_blank" rel="noopener">NODE å…¥é—¨</a></p><h2 id="Hello-NODE"><a href="#Hello-NODE" class="headerlink" title="Hello NODE"></a>Hello NODE</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	hello.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Hello NODE'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">//	<span class="built_in">cd</span> into hello.js directory</span><br><span class="line">node hello.js</span><br><span class="line"></span><br><span class="line">//	Output</span><br><span class="line">Hello NODE</span><br></pre></td></tr></table></figure><h2 id="require"><a href="#require" class="headerlink" title="require"></a>require</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'first'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//	åŠ è½½æ‰§è¡Œ a.jsï¼Œåç¼€åå¯çœç•¥</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./a.js'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'last'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//	å¼•å…¥æŸä¸ªå¯¹è±¡æˆ–è€…ç¬¬ä¸‰æ–¹æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'js'</span>)</span><br></pre></td></tr></table></figure><h2 id="exports-amp-module-exports"><a href="#exports-amp-module-exports" class="headerlink" title="exports &amp; module.exports"></a>exports &amp; module.exports</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">    exports: &#123;</span><br><span class="line">        foo: <span class="number">123</span>,</span><br><span class="line">        fun: ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">module</span>.exports</span><br><span class="line"></span><br><span class="line"><span class="comment">//  foo.js</span></span><br><span class="line"><span class="built_in">module</span>.exports.foo = <span class="number">123</span></span><br><span class="line"><span class="comment">//	æ­¤æ—¶ä¼šè¦†ç›–æ‰ä¹‹å‰çš„ 123</span></span><br><span class="line"><span class="built_in">module</span>.exports.foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'function'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	main.js</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="built_in">require</span>(<span class="string">'/foo'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(foo)	<span class="comment">//	&#123; foo: [Function] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	åç»­å®˜æ–¹ä¼˜åŒ–</span></span><br><span class="line"><span class="keyword">var</span> exports = <span class="built_in">module</span>.exports</span><br><span class="line"><span class="built_in">console</span>.log(exports === <span class="built_in">module</span>.exports);	<span class="comment">//	true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	å½“æˆ‘ä»¬å¯¼å‡ºå•ä¸ªå€¼æ—¶ä¸èƒ½ç›´æ¥èµ‹å€¼ exports</span></span><br><span class="line">exports = <span class="number">123</span>	<span class="comment">//	wrong</span></span><br><span class="line"><span class="comment">//	because return module.exports,å¦‚æœæˆ‘ä»¬ç›´æ¥èµ‹å€¼åˆ™ä¼šä½¿å¾— exports æŒ‡å‘å¦ä¸€ä¸ªå†…å­˜åœ°å€è€Œé module.exports çš„å†…å­˜åœ°å€ï¼Œä½¿å¾—ä¿®æ”¹å¹¶æœªæ”¹åŠ¨ module.exports</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	å¦‚æœæˆ‘ä»¬åˆç›´æ¥ç»™ module.exports åˆ™åŸç†ä¸€æ ·</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">'hello'</span></span><br><span class="line">exports.foo = <span class="number">123</span></span><br><span class="line"><span class="comment">//	æ­¤æ—¶ require æ¥æ”¶çš„å°±æ˜¯ 'hello'</span></span><br><span class="line"></span><br><span class="line">exports.foo = <span class="number">123</span></span><br><span class="line">exports.fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'function'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo)  <span class="comment">//	&#123; foo: 123, fun: [Function] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(foo.foo, foo.fun);	<span class="comment">//	123 [Function]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	é€šå¸¸è¿™æ ·ä½¿ç”¨(ä»¥ä¸Šä¸ç†è§£è®°ä½æ­¤å³å¯)</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    foo: <span class="number">123</span>,</span><br><span class="line">    fun: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'function'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo)  <span class="comment">//	&#123; foo: 123, fun: [Function] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	require å¼•å…¥åŠ è½½ä¹Ÿä¼šä¼˜å…ˆä»ç¼“å­˜åŠ è½½ï¼Œå¦‚æœå‰é¢å·²ç»å¯¼å…¥è¿‡åˆ™ä¸å†æ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥æ‹¿åˆ°å¯¼å…¥å¯¹è±¡çš„æ¥å£å¯¹è±¡ï¼Œæé«˜è¿è¡Œæ•ˆç‡ã€‚</span></span><br></pre></td></tr></table></figure><p>require ç¬¬ä¸‰æ–¹æ¨¡å—åŠ è½½è§„åˆ™ï¼š</p><blockquote><p>ä¸€ä¸ªé¡¹ç›®æœ‰ä¸”åªæœ‰ä¸€ä¸ª node_modulesï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œè¿™æ ·çš„è¯é¡¹ç›®ä¸­æ‰€æœ‰çš„å­ç›®å½•ä¸­çš„ä»£ç éƒ½å¯ä»¥åŠ è½½åˆ°ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¸ä¼šå‡ºç°æœ‰å¤šä¸ª node_modules</p></blockquote><ul><li>æ¨¡å—æŸ¥æ‰¾æœºåˆ¶<br>ä¼˜å…ˆä»ç¼“å­˜åŠ è½½<br>æ ¸å¿ƒæ¨¡å—<br>è·¯å¾„å½¢å¼çš„æ–‡ä»¶æ¨¡å—<br>ç¬¬ä¸‰æ–¹æ¨¡å—<br> node_modules/art-template/<br> node_modules/art-template/package.json<br> node_modules/art-template/package.json main<br> index.js å¤‡é€‰é¡¹<br> è¿›å…¥ä¸Šä¸€çº§ç›®å½•æ‰¾ node_modules<br> æŒ‰ç…§è¿™ä¸ªè§„åˆ™ä¾æ¬¡å¾€ä¸Šæ‰¾ï¼Œç›´åˆ°ç£ç›˜æ ¹ç›®å½•è¿˜æ‰¾ä¸åˆ°ï¼Œæœ€åæŠ¥é”™ï¼šCan not find moudle xxx<br>ä¸€ä¸ªé¡¹ç›®æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª node_modules è€Œä¸”æ˜¯å­˜æ”¾åˆ°é¡¹ç›®çš„æ ¹ç›®å½•</li></ul><p>æ›´å¤šç»†èŠ‚å¯ä»¥é˜…è¯» <a href="https://www.infoq.cn/article/nodejs-module-mechanism" target="_blank" rel="noopener">æ·±å…¥ Node.js çš„æ¨¡å—æœºåˆ¶</a></p><p>Moreï¼š<a href="https://nodejs.org/dist/latest-v12.x/docs/api/modules.html#modules_module_exports" target="_blank" rel="noopener">module.exports</a></p><h2 id="Read-Write-File"><a href="#Read-Write-File" class="headerlink" title="Read || Write File"></a>Read || Write File</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	å¯¼å…¥ js æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'js'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  Read file</span></span><br><span class="line"><span class="comment">//  å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„åˆ™æ˜¯ç›¸å¯¹äºå½“å‰æ‰§è¡Œ node çš„æ–‡ä»¶è·¯å¾„è€Œä¸æ˜¯ç›¸å¯¹äºæ­£åœ¨æ‰§è¡Œçš„æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  å…ˆæ¥çœ‹çœ‹ fs.readFile çš„å‚æ•°åˆ—è¡¨ï¼ˆä¸æ­¢ä¸‹é¢ä¸€ç§ï¼Œåªæ˜¯å½“åšç¤ºä¾‹ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">        path: PathLike | number,</span></span></span><br><span class="line"><span class="function"><span class="params">        options: &#123; encoding?: string | null; flag?: string; &#125; | string | undefined | null,</span></span></span><br><span class="line"><span class="function"><span class="params">        callback: (err: NodeJS.ErrnoException | null, data: string | Buffer</span>) =&gt; <span class="title">void</span>,</span></span><br><span class="line"><span class="function">    ): <span class="title">void</span>;</span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">fs</span>.<span class="title">readFile</span>(<span class="params"><span class="string">'./my.txt'</span>,<span class="string">'utf8'</span>,(err,data</span>) =&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//  æ­¤æ—¶ err =&gt; null</span></span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  é€šè¿‡__filename/__dirname(å½“å‰æ­£åœ¨æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶/ç›®å½•è·¯å¾„)</span></span><br><span class="line"><span class="comment">//  ä½†æ˜¯è¿™ä¸¤ä¸ªå¹¶éæ˜¯å…¨å±€çš„ï¼Œè€Œæ˜¯æŒ‰ç…§(function(__dirname,__filename)&#123;&#125;)(å½“å‰æ­£åœ¨æ‰§è¡Œæ–‡ä»¶çš„ç›®å½•,è·¯å¾„)æ–¹å¼æ¥ç¡®å®šè¯¥è¿è¡Œæ¨¡å—çš„ dir/filename</span></span><br><span class="line"><span class="built_in">console</span>.log(__filename,__dirname);</span><br><span class="line"></span><br><span class="line">fs.readFile(__dirname+<span class="string">'/my.txt'</span>,<span class="string">'utf8'</span>,(err,data) =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><blockquote><p> node <strong>é”™è¯¯ä¼˜å…ˆ</strong>ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°é€šå¸¸æ˜¯ errï¼‰,å¹¶ä¸”åœ¨åŒæ­¥æ“ä½œä¸­é€šè¿‡ <em>try</em>-<em>catch</em> æ¥æ•è·å¼‚å¸¸,</p><p> ä½†æ˜¯å¼‚æ­¥æ“ä½œï¼ˆæ¯”å¦‚è¯»å†™æ–‡ä»¶ã€ç½‘ç»œè¯·æ±‚ï¼‰æ— æ³•å®Œæˆï¼Œè€Œæ˜¯é€šè¿‡ <em>if</em> è¯­å¥æ¥åˆ¤æ–­è¿›è¡Œåç»­å¤„ç†</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  æ›´ä¼˜é›…çš„æ–¹å¼:</span></span><br><span class="line"> <span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"> <span class="keyword">let</span> filename = path.join(__dirname,<span class="string">'my.txt'</span>)</span><br><span class="line"> <span class="built_in">console</span>.log(filename);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  node write file</span></span><br><span class="line"> fs.writeFile(<span class="string">'./my.txt'</span>,msg,<span class="string">'utf8'</span>,(err) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'There is some errora: '</span> + err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Success!'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Http"><a href="#Http" class="headerlink" title="Http"></a>Http</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	å¯¼å…¥ http æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€å°æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">let</span> server = http.createServer()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœªç»™æµè§ˆå™¨è¿”å›ä»»ä½•ä¸œè¥¿</span></span><br><span class="line">server.on(<span class="string">'request'</span>, () =&gt; </span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'there has some people visitting the web~'</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// set response</span></span><br><span class="line"><span class="keyword">let</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;   <span class="comment">//å½“æœ‰äººæ¥è®¿é—®è¿™ä¸ªæœåŠ¡å™¨æ—¶ï¼Œå°±ä¼šæ‰§è¡Œfunction è¿™ä¸ªå›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'there has some people visitting the web~'</span> + request.url);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®å“åº”æŠ¥æ–‡å¤´ï¼štext/plain | text/html | charset=utf-8</span></span><br><span class="line">    response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/plain;charset=utf-8'</span>);</span><br><span class="line">    </span><br><span class="line">    response.write(<span class="string">'hello Tadm ~'</span>);  <span class="comment">//å‘æµè§ˆå™¨è¾“å‡ºå†…å®¹</span></span><br><span class="line">    response.write(<span class="string">' these contents from node ~'</span>)</span><br><span class="line">    </span><br><span class="line">    response.end();   <span class="comment">//  ç»“æŸæ­¤æ¬¡è¯·æ±‚,ä¸èƒ½çœç•¥</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//	åˆ¤æ–­ä¸åŒè·¯å¾„è¿”å›ä¸åŒå†…å®¹</span></span><br><span class="line">    <span class="keyword">if</span>(request.url === <span class="string">'/'</span>)&#123;</span><br><span class="line">        response.end(<span class="string">'home page'</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(request.url ==== <span class="string">'/login'</span>) &#123;</span><br><span class="line">		response.end(<span class="string">'login page'</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(request.url ==== <span class="string">'/json'</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> jsonEaxmple = [<span class="string">'hello'</span>,<span class="string">'tadm'</span>]</span><br><span class="line">        <span class="comment">//	Wrong</span></span><br><span class="line">		response.end(jsonEaxmple)</span><br><span class="line">        <span class="comment">//	Correct</span></span><br><span class="line">        response.end(<span class="built_in">JSON</span>.stringfy(jsonEaxmple))</span><br><span class="line">	&#125; </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  è®¾ç½®ç›‘å¬ç«¯å£ä»¥åŠå›è°ƒå‡½æ•°(å¯é€‰)</span></span><br><span class="line">server.listen(<span class="number">8080</span>,() =&gt; </span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'The server has been started!'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å¦‚æœéœ€è¦æ ¹æ®ä¸åŒè¯·æ±‚ URL æ¥è¿”å›å¯¹åº”å†…å®¹ï¼Œåˆ™å¯ä»¥é€šè¿‡ </span></span><br><span class="line">fs.readFile(path.join(__dirname,<span class="string">'index.html'</span>),(err,data) =&gt; &#123;</span><br><span class="line">     <span class="keyword">if</span>(err) &#123; <span class="keyword">throw</span> err &#125; </span><br><span class="line">     request.end(data)</span><br><span class="line"> &#125;)</span><br><span class="line"><span class="comment">//  åŒæ—¶éœ€è¦åœ¨å“åº”å¤´ä¸­è®¾ç½®ContentType:text/html</span></span><br></pre></td></tr></table></figure><blockquote><p>res.end(sth) =&gt; sth åªèƒ½ä¸º <strong>String or Buffer</strong></p></blockquote><p><strong>ä¼˜é›…åŒ–ï¼š</strong></p><p><a href="https://nodejs.org/dist/latest-v12.x/docs/api/http.html#http_request_getheader_name" target="_blank" rel="noopener">Request</a></p><p><a href="https://nodejs.org/dist/latest-v12.x/docs/api/http.html#http_response_setheader_name_value" target="_blank" rel="noopener">Response</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> mime = <span class="built_in">require</span>(<span class="string">'mime'</span>)  <span class="comment">//  npm i mime é€šè¿‡è¯·æ±‚æ–‡ä»¶ç±»å‹è¿”å›æŒ‡å®š Content-Type</span></span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> publicDir = path.join(__dirname, <span class="string">'public'</span>)</span><br><span class="line">  <span class="keyword">let</span> filename = path.join(publicDir, req.url)</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log(req.url);</span><br><span class="line">  fs.readFile(filename, (err,data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123; </span><br><span class="line">        res.end(<span class="string">'There is some errors~'</span>) </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    res.setHeader(<span class="string">'Content-Type'</span>, mime.getType(filename))</span><br><span class="line">      </span><br><span class="line">    res.end(data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).listen(<span class="number">8080</span>,() =&gt; </span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'The Server has been started!'</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> publicDir = path.join(__dirname, <span class="string">'public'</span>)</span><br><span class="line">  <span class="keyword">let</span> filename = path.join(publicDir, req.url)</span><br><span class="line">  <span class="built_in">console</span>.log(filename);</span><br><span class="line"></span><br><span class="line">  req.url = req.url.toLowerCase()</span><br><span class="line">  req.method = req.method.toLowerCase()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// loadFile()  ---  æŒ‚è½½åˆ° res å¯¹è±¡ä¸Šï¼Œåˆ™ä¸å†éœ€è¦ä¼ å…¥ res å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// res.loadFile = function (filename) &#123; fs.readFile(filename, (err,data) =&gt; res.end(data)) &#125;</span></span><br><span class="line">  <span class="comment">// res.loadFile(filename)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>((req.url === <span class="string">'/'</span> || req.url === <span class="string">'/index'</span>) &amp;&amp; req.method === <span class="string">'get'</span>)&#123;</span><br><span class="line">    <span class="comment">// fs.readFile(path.join(filename,'index.html'),(err,data) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   if(err)&#123; res.end('There is some errors~') &#125;</span></span><br><span class="line">    <span class="comment">//   res.setHeader('Content-Type',mime.getType(filename))</span></span><br><span class="line">    <span class="comment">//   res.end(data)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    loadFile(path.join(filename,<span class="string">'index.html'</span>),res)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(req.url.startsWith(<span class="string">'/resources'</span>) &amp;&amp; req.method === <span class="string">'get'</span>)&#123;</span><br><span class="line">    <span class="comment">// fs.readFile(filename,(err,data) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   if(err)&#123; res.end('There is some errors~') &#125;</span></span><br><span class="line">    <span class="comment">//   res.setHeader('Content-Type',mime.getType(filename))</span></span><br><span class="line">    <span class="comment">//   res.end(data)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    loadFile(filename,res)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;).listen(<span class="number">8080</span>,() =&gt; <span class="built_in">console</span>.log(<span class="string">'The Server has been started!'</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadFile</span>(<span class="params">filename, res</span>)</span>&#123;</span><br><span class="line">  fs.readFile(filename,(err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123; </span><br><span class="line">        res.end(<span class="string">'There is some errors~'</span>) </span><br><span class="line">    &#125;</span><br><span class="line">    res.setHeader(<span class="string">'Content-Type'</span>, mime.getType(filename))</span><br><span class="line">    res.end(data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬æƒ³è¦ get/post æäº¤ä¸œè¥¿åˆ°æœåŠ¡å™¨äº†ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æå–é¡µé¢æäº¤åˆ°æœåŠ¡å™¨çš„å†…å®¹(tittle=test&amp;name=tadm)å¹¶å†™å…¥ data.json</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">'querystring'</span>)  <span class="comment">//  å°† post æäº¤çš„ buffer è½¬æ¢ä¸º json å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">fs.readFile(filepath(data.json çš„ä½ç½®),<span class="string">'utf8'</span>,(err,data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(err &amp;&amp; err.code !==<span class="string">'ENOENT'</span>)&#123;</span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">let</span> infoList = <span class="built_in">JSON</span>.parse(data || <span class="string">'[]'</span>)  </span><br><span class="line">  <span class="keyword">let</span> array = []</span><br><span class="line">  </span><br><span class="line">  req.on(<span class="string">'data'</span>,(chunk) =&gt; array.push(chunk))</span><br><span class="line">    </span><br><span class="line">  req.on(<span class="string">'end'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> postBody = Buffer.concat(array)</span><br><span class="line">    postBody = postBody.toString(<span class="string">'utf8'</span>)</span><br><span class="line">    postBody = querystring.parse(postBody)</span><br><span class="line">    infoList.push(postBody)</span><br><span class="line">    res.end(<span class="string">'ok~'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">    </span><br><span class="line">  fs.writeFile(path.join(__dirname,<span class="string">'data'</span>,<span class="string">'data.json'</span>),<span class="built_in">JSON</span>.stringify(infoList),<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123; <span class="keyword">throw</span> err&#125;</span><br><span class="line">    res.statusCode = <span class="number">302</span>  <span class="comment">//  å†™å…¥æ•°æ®åé‡å®šå‘</span></span><br><span class="line">    res.statusMessage = <span class="string">'Found'</span></span><br><span class="line">    res.setHeader(<span class="string">'Location'</span>,<span class="string">'/'</span>)</span><br><span class="line">    res.end()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><blockquote><p><a href="http://expressjs.com/" target="_blank" rel="noopener">http://expressjs.com/</a></p></blockquote><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> express-demo</span><br><span class="line">cnpm i express -S</span><br><span class="line"><span class="built_in">cd</span> express-demo</span><br></pre></td></tr></table></figure><h2 id="Usage-1"><a href="#Usage-1" class="headerlink" title="Usage"></a>Usage</h2><p>Hello world ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª express (like http.createServer())</span></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	è®¿é—® http://localhost:3000/ æ—¶è¿”å› Hello World!</span></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; res.send(<span class="string">'Hello World!'</span>))</span><br><span class="line"></span><br><span class="line">app.listen(port, () =&gt; <span class="built_in">console</span>.log(<span class="string">`Example app listening on port <span class="subst">$&#123;port&#125;</span>!`</span>))</span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ª app.js æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; res.send(<span class="string">'Hello World~ From Get~'</span>))  <span class="comment">//  è·¯å¾„ã€è¯·æ±‚æ–¹æ³•(===)</span></span><br><span class="line">app.post(<span class="string">'/otr'</span>, (req, res) =&gt; res.send(<span class="string">'Hello World~ From Post~'</span>))    <span class="comment">//  åŒä¸Š</span></span><br><span class="line">app.use(<span class="string">'/use'</span>, (req, res) =&gt; res.send(<span class="string">'Hello World~ From Use~'</span>))   <span class="comment">//  ä¸é™è¯·æ±‚æ–¹æ³•ï¼Œè·¯å¾„ï¼š/index/*</span></span><br><span class="line">app.all(<span class="string">'/all'</span>, (req, res) =&gt; res.send(<span class="string">'Hello World~ From All~'</span>))   <span class="comment">//  ä¸é™è¯·æ±‚æ–¹æ³•ï¼Œè·¯å¾„(===)</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="regexp">/^\/index(\/.*)*$/</span>, (req, res) =&gt; res.send(<span class="string">'Hello World~ From Regex~'</span>))  <span class="comment">// æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è·¯å¾„</span></span><br><span class="line">app.get(<span class="string">'/query'</span>, (req, res) =&gt; <span class="built_in">console</span>.log(req.query))	<span class="comment">//	é€šè¿‡ query è·å–å‚æ•°</span></span><br><span class="line"><span class="comment">//  http://localhost:3000/query?name=tadm	&#123; name: 'tadm' &#125;</span></span><br><span class="line">app.get(<span class="string">'/params/:title/:name'</span>, (req, res) =&gt; res.send(req.params)) <span class="comment">//  é€šè¿‡ params è·å–å‚æ•°</span></span><br><span class="line"><span class="comment">//  http://localhost:3000/params/test/tadm  &#123;"title":"test","name":"tadm"&#125;</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/json'</span>, (req, res) =&gt; res.json(&#123; <span class="attr">title</span>:<span class="string">'json'</span>,<span class="attr">name</span>:<span class="string">'tadm'</span> &#125;))</span><br><span class="line">app.get(<span class="string">'/jsonsend'</span>, (req, res) =&gt; res.send(&#123; <span class="attr">title</span>:<span class="string">'json'</span>,<span class="attr">name</span>:<span class="string">'tadm'</span> &#125;))</span><br><span class="line">app.get(<span class="string">'/error'</span>, (req, res) =&gt; res.status(<span class="number">404</span>).end(<span class="string">'There is 404~'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¬å¼€æŒ‡å®šç›®å½•,æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ public/* æ¥è®¿é—®æ–‡ä»¶å¤¹ä¸‹çš„èµ„æº</span></span><br><span class="line">app.use(<span class="string">'/static'</span>, express.static(path.join(__dirname, <span class="string">'public'</span>)))</span><br><span class="line"></span><br><span class="line">app.listen(port, () =&gt; <span class="built_in">console</span>.log(<span class="string">`Example app listening on port <span class="subst">$&#123;port&#125;</span>!`</span>, __dirname))</span><br><span class="line"></span><br><span class="line"><span class="comment">// More: http://expressjs.com/en/4x/api.html</span></span><br></pre></td></tr></table></figure><h2 id="Nodemon"><a href="#Nodemon" class="headerlink" title="Nodemon"></a>Nodemon</h2><blockquote><p>è‡ªåŠ¨é‡å¯å·¥å…·ï¼Œä¸å†éœ€è¦æ¯æ¬¡é‡å¯æœåŠ¡ï¼Œç›´æ¥ ctrl+s å®Œäº‹</p></blockquote><h3 id="Install-1"><a href="#Install-1" class="headerlink" title="Install"></a>Install</h3><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm i nodemon -g</span><br></pre></td></tr></table></figure><h3 id="Usage-2"><a href="#Usage-2" class="headerlink" title="Usage"></a>Usage</h3><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">nodemon --version</span><br><span class="line"></span><br><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure><h2 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h2><p>body-parser</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm i body-parser -S</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"> </span><br><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"> </span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"> </span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/plain'</span>)</span><br><span class="line">  res.write(<span class="string">'you posted:\n'</span>)</span><br><span class="line">  res.end(<span class="built_in">JSON</span>.stringify(req.body, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>CODE Example</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"./favicon.ico"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>There is a beautiful girl<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"1000px"</span> <span class="attr">height</span>=<span class="string">"700px"</span> <span class="attr">src</span>=<span class="string">"./img45.jpg"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comments container"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/post"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"input_name"</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">required</span> <span class="attr">minlength</span>=<span class="string">"2"</span> <span class="attr">maxlength</span>=<span class="string">"10"</span> <span class="attr">id</span>=<span class="string">"input_name"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">placeholder</span>=<span class="string">"Please input your name~"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"textarea_message"</span>&gt;</span>Content<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"message"</span> <span class="attr">id</span>=<span class="string">"textarea_message"</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"10"</span> <span class="attr">required</span> <span class="attr">minlength</span>=<span class="string">"5"</span> <span class="attr">maxlength</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-success"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¬å¼€æŒ‡å®šç›®å½•,æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ public/* æ¥è®¿é—®æ–‡ä»¶å¤¹ä¸‹çš„èµ„æº</span></span><br><span class="line">app.use(<span class="string">'/static'</span>, express.static(path.join(__dirname, <span class="string">'public'</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"> </span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">'/post'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.body);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//	[Object: null prototype] &#123; name: 'Tadm', message: '12345' &#125;</span></span><br></pre></td></tr></table></figure><h2 id="app-useï¼ˆ-pathï¼Œ-callback-ï¼Œcallback-â€¦-ï¼‰"><a href="#app-useï¼ˆ-pathï¼Œ-callback-ï¼Œcallback-â€¦-ï¼‰" class="headerlink" title="app.useï¼ˆ[pathï¼Œ] callback [ï¼Œcallback â€¦]ï¼‰"></a>app.useï¼ˆ[pathï¼Œ] callback [ï¼Œcallback â€¦]ï¼‰</h2><p>å°†æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ª<a href="http://expressjs.com/guide/using-middleware.html" target="_blank" rel="noopener">ä¸­é—´ä»¶</a>å‡½æ•°å®‰è£…åœ¨æŒ‡å®šçš„è·¯å¾„ä¸Šï¼šå½“æ‰€è¯·æ±‚è·¯å¾„çš„åŸºæ•°åŒ¹é…æ—¶ï¼Œå°†æ‰§è¡Œä¸­é—´ä»¶å‡½æ•°<code>path</code>ã€‚</p><ul><li>åŠ è½½é™æ€æ–‡ä»¶</li><li><a href="http://expressjs.com/en/guide/using-middleware.html" target="_blank" rel="noopener">ä½¿ç”¨ä¸­é—´ä»¶</a></li></ul><blockquote><p>ä½¿ç”¨ä¸­é—´ä»¶ä¹Ÿéœ€è¦æ³¨æ„é¡ºåºï¼Œæ›´å¤šæŸ¥çœ‹<a href="http://expressjs.com/en/4x/api.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><h2 id="Small-Demo"><a href="#Small-Demo" class="headerlink" title="Small Demo"></a>Small Demo</h2><ul><li>app.js</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'./router'</span>)</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = express()</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/node_modules/'</span>, express.static(<span class="string">'./node_modules/'</span>))</span><br><span class="line">app.use(<span class="string">'/public/'</span>, express.static(<span class="string">'./public/'</span>))</span><br><span class="line"></span><br><span class="line">app.engine(<span class="string">'html'</span>, <span class="built_in">require</span>(<span class="string">'express-art-template'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®æ¨¡æ¿å¼•æ“å’Œ body-parser ä¸€å®šè¦åœ¨ app.use(router) æŒ‚è½½è·¯ç”±ä¹‹å‰</span></span><br><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠè·¯ç”±å®¹å™¨æŒ‚è½½åˆ° app æœåŠ¡ä¸­</span></span><br><span class="line">app.use(router)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'running 3000...'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = app</span><br></pre></td></tr></table></figure><ul><li>router.js</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.Router()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Student = <span class="built_in">require</span>(<span class="string">'./student'</span>)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/students'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  Student.find(<span class="function"><span class="keyword">function</span>(<span class="params">err, students</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">'Server error.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    res.render(<span class="string">'index.html'</span>, &#123;</span><br><span class="line">      fruits: [</span><br><span class="line">        <span class="string">'è‹¹æœ'</span>,</span><br><span class="line">        <span class="string">'é¦™è•‰'</span>,</span><br><span class="line">        <span class="string">'æ©˜å­'</span></span><br><span class="line">      ],</span><br><span class="line">      students: students</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/students/new'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">'new.html'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/students/new'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  Student.save(req.body, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">'Server error.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    res.redirect(<span class="string">'/students'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/students/edit'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  Student.findById(<span class="built_in">parseInt</span>(req.query.id), <span class="function"><span class="keyword">function</span> (<span class="params">err, student</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">'Server error.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    res.render(<span class="string">'edit.html'</span>, &#123;</span><br><span class="line">      student: student</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/students/edit'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  Student.updateById(req.body, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">'Server error.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    res.redirect(<span class="string">'/students'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/students/delete'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  Student.deleteById(req.query.id, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">'Server error.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    res.redirect(<span class="string">'/students'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router</span><br></pre></td></tr></table></figure><ul><li>student.js</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> dbPath = <span class="string">'./db.json'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeData</span>(<span class="params">students, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> fileData = <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    students: students</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  fs.writeFile(dbPath, fileData, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err)</span><br><span class="line">    &#125;</span><br><span class="line">    callback(<span class="literal">null</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.find = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(dbPath, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err)</span><br><span class="line">    &#125;</span><br><span class="line">    callback(<span class="literal">null</span>, <span class="built_in">JSON</span>.parse(data).students)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.findById = <span class="function"><span class="keyword">function</span> (<span class="params">id, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(dbPath, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> students = <span class="built_in">JSON</span>.parse(data).students</span><br><span class="line">    <span class="keyword">let</span> ret = students.find(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item.id === <span class="built_in">parseInt</span>(id)</span><br><span class="line">    &#125;)</span><br><span class="line">    callback(<span class="literal">null</span>, ret)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.save = <span class="function"><span class="keyword">function</span> (<span class="params">student, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(dbPath, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> students = <span class="built_in">JSON</span>.parse(data).students</span><br><span class="line"></span><br><span class="line">    student.id = students[students.length - <span class="number">1</span>].id + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    students.push(student)</span><br><span class="line"></span><br><span class="line">    writeData(students,callback)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.updateById = <span class="function"><span class="keyword">function</span> (<span class="params">student, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(dbPath, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> students = <span class="built_in">JSON</span>.parse(data).students</span><br><span class="line"></span><br><span class="line">    student.id = <span class="built_in">parseInt</span>(student.id)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> stu = students.find(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item.id === student.id</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> student) &#123;</span><br><span class="line">      stu[key] = student[key]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    writeData(students,callback)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.deleteById = <span class="function"><span class="keyword">function</span> (<span class="params">id, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(dbPath, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> students = <span class="built_in">JSON</span>.parse(data).students</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> deleteId = students.findIndex(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item.id === <span class="built_in">parseInt</span>(id)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    students.splice(deleteId, <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    writeData(students,callback)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>db.json</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">"students"</span>:</span><br><span class="line"> [</span><br><span class="line">     &#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"name"</span>:<span class="string">"Foo"</span>,<span class="attr">"gender"</span>:<span class="string">"0"</span>,<span class="attr">"age"</span>:<span class="string">"24"</span>,<span class="attr">"hobbies"</span>:<span class="string">"Study"</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">"name"</span>:<span class="string">"Tadm"</span>,<span class="attr">"gender"</span>:<span class="string">"0"</span>,<span class="attr">"age"</span>:<span class="string">"19"</span>,<span class="attr">"hobbies"</span>:<span class="string">"Coding"</span>,<span class="attr">"id"</span>:<span class="number">2</span>&#125;</span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>index.html</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">href</span>=<span class="string">"../../favicon.ico"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Dashboard Template for Bootstrap<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Bootstrap core CSS --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/node_modules/bootstrap/dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Custom styles for this template --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/public/css/main.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-inverse navbar-fixed-top"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"navbar-toggle collapsed"</span> <span class="attr">data-toggle</span>=<span class="string">"collapse"</span> <span class="attr">data-target</span>=<span class="string">"#navbar"</span> <span class="attr">aria-expanded</span>=<span class="string">"false"</span> <span class="attr">aria-controls</span>=<span class="string">"navbar"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"navbar-brand"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Project name<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"navbar"</span> <span class="attr">class</span>=<span class="string">"navbar-collapse collapse"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav navbar-right"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Dashboard<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"navbar-form navbar-right"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Search..."</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-3 col-md-2 sidebar"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav nav-sidebar"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span>&gt;</span>å­¦ç”Ÿç®¡ç† <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"page-header"</span>&gt;</span>Dashboard<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row placeholders"</span>&gt;</span></span><br><span class="line">          &#123;&#123; each fruits &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-xs-6 col-sm-3 placeholder"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"200"</span> <span class="attr">class</span>=<span class="string">"img-responsive"</span> <span class="attr">alt</span>=<span class="string">"Generic placeholder thumbnail"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; $value &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text-muted"</span>&gt;</span>Something else<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          &#123;&#123; /each &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"sub-header"</span>&gt;</span>Section title<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-success"</span> <span class="attr">href</span>=<span class="string">"/students/new"</span>&gt;</span>æ·»åŠ å­¦ç”Ÿ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"table-responsive"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-striped"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>çˆ±å¥½<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">              &#123;&#123; each students &#125;&#125;</span><br><span class="line">              <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.id &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.hobbies &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/students/edit?id=&#123;&#123; $value.id &#125;&#125;"</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/students/delete?id=&#123;&#123; $value.id &#125;&#125;"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">              &#123;&#123; /each &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>edit.html</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-inverse navbar-fixed-top"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-header"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"navbar-toggle collapsed"</span> <span class="attr">data-toggle</span>=<span class="string">"collapse"</span> <span class="attr">data-target</span>=<span class="string">"#navbar"</span> <span class="attr">aria-expanded</span>=<span class="string">"false"</span> <span class="attr">aria-controls</span>=<span class="string">"navbar"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"navbar-brand"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Project name<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"navbar"</span> <span class="attr">class</span>=<span class="string">"navbar-collapse collapse"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav navbar-right"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Dashboard<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"navbar-form navbar-right"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Search..."</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-3 col-md-2 sidebar"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav nav-sidebar"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/students"</span>&gt;</span>å­¦ç”Ÿç®¡ç† <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"sub-header"</span>&gt;</span>æ·»åŠ å­¦ç”Ÿ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/students/edit"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">          ç”¨æ¥æ”¾ä¸€äº›ä¸å¸Œæœ›è¢«ç”¨æˆ·çœ‹è§ï¼Œä½†æ˜¯éœ€è¦è¢«æäº¤åˆ°æœåŠ¡ç«¯çš„æ•°æ®</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; student.id &#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">required</span> <span class="attr">minlength</span>=<span class="string">"2"</span> <span class="attr">maxlength</span>=<span class="string">"10"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; student.name &#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">checked</span>&gt;</span> ç”·</span><br><span class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span> å¥³</span><br><span class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; student.age &#125;&#125;"</span> <span class="attr">required</span> <span class="attr">min</span>=<span class="string">"1"</span> <span class="attr">max</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>çˆ±å¥½<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"hobbies"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; student.hobbies &#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>new.html</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-inverse navbar-fixed-top"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"navbar-toggle collapsed"</span> <span class="attr">data-toggle</span>=<span class="string">"collapse"</span> <span class="attr">data-target</span>=<span class="string">"#navbar"</span> <span class="attr">aria-expanded</span>=<span class="string">"false"</span> <span class="attr">aria-controls</span>=<span class="string">"navbar"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"navbar-brand"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Project name<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"navbar"</span> <span class="attr">class</span>=<span class="string">"navbar-collapse collapse"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav navbar-right"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Dashboard<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"navbar-form navbar-right"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Search..."</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-3 col-md-2 sidebar"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav nav-sidebar"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/students"</span>&gt;</span>å­¦ç”Ÿç®¡ç† <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"sub-header"</span>&gt;</span>æ·»åŠ å­¦ç”Ÿ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/students/new"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">required</span> <span class="attr">minlength</span>=<span class="string">"2"</span> <span class="attr">maxlength</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">checked</span>&gt;</span> ç”·</span><br><span class="line">              <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span> å¥³</span><br><span class="line">              <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">required</span> <span class="attr">min</span>=<span class="string">"1"</span> <span class="attr">max</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>çˆ±å¥½<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"hobbies"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>åˆæ­¥è®¤è¯†å¯å‚è€ƒæ­¤ç¯‡ï¼š<a href="https://liuhongwei3.github.io/2020/01/20/mongoDBcommand/">mongoDBcommand</a></p><p>å®˜æ–¹ï¼š<a href="https://www.npmjs.com/package/mongodb" target="_blank" rel="noopener">mongodb</a></p><p>å†æ¬¡å°è£…ç‰ˆï¼š<a href="https://www.npmjs.com/package/mongoose" target="_blank" rel="noopener">mongoose</a></p><ul><li>Install</li></ul><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm i mongoose -S</span><br></pre></td></tr></table></figure><ul><li>Usage</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"></span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost:27017/test'</span>, &#123;<span class="attr">useNewUrlParser</span>: <span class="literal">true</span>, <span class="attr">useUnifiedTopology</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Cat = mongoose.model(<span class="string">'Cat'</span>, &#123; <span class="attr">name</span>: <span class="built_in">String</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kitty = <span class="keyword">new</span> Cat(&#123; <span class="attr">name</span>: <span class="string">'Zildjian'</span> &#125;);</span><br><span class="line">kitty.save().then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'meow'</span>));</span><br></pre></td></tr></table></figure><ul><li>Result</li></ul><blockquote><p>db<br>test</p><p>show dbs<br>admin 0.000GB<br>config 0.000GB<br>elm 0.001GB<br>local 0.000GB<br>test 0.000GB</p><p>show collections<br>cats<br>student</p><p>db.cats.find()<br>{ â€œ_idâ€ : ObjectId(â€œ5e5115d217508ead24309fb5â€), â€œnameâ€ : â€œZildjianâ€, â€œ__vâ€ : 0 }</p></blockquote><h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>)</span><br><span class="line"><span class="keyword">let</span> Schema = mongoose.Schema</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. è¿æ¥æ•°æ®åº“</span></span><br><span class="line"><span class="comment">// æŒ‡å®šè¿æ¥çš„æ•°æ®åº“ä¸éœ€è¦å­˜åœ¨ï¼Œå½“ä½ æ’å…¥ç¬¬ä¸€æ¡æ•°æ®ä¹‹åå°±ä¼šè‡ªåŠ¨è¢«åˆ›å»ºå‡ºæ¥</span></span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost/nodemongoose'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. è®¾è®¡æ–‡æ¡£ç»“æ„ï¼ˆè¡¨ç»“æ„ï¼‰</span></span><br><span class="line"><span class="comment">// å­—æ®µåç§°å°±æ˜¯è¡¨ç»“æ„ä¸­çš„å±æ€§åç§°</span></span><br><span class="line"><span class="comment">// çº¦æŸçš„ç›®çš„æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œä¸è¦æœ‰è„æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> userSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  username: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  password: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  email: &#123;</span><br><span class="line">    type: <span class="built_in">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. å°†æ–‡æ¡£ç»“æ„å‘å¸ƒä¸ºæ¨¡å‹</span></span><br><span class="line"><span class="comment">//    mongoose.model æ–¹æ³•å°±æ˜¯ç”¨æ¥å°†ä¸€ä¸ªæ¶æ„å‘å¸ƒä¸º model</span></span><br><span class="line"><span class="comment">//    ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¼ å…¥ä¸€ä¸ªå¤§å†™åè¯å•æ•°å­—ç¬¦ä¸²ç”¨æ¥è¡¨ç¤ºä½ çš„æ•°æ®åº“åç§°</span></span><br><span class="line"><span class="comment">//                 mongoose ä¼šè‡ªåŠ¨å°†å¤§å†™åè¯çš„å­—ç¬¦ä¸²ç”Ÿæˆ å°å†™å¤æ•° çš„é›†åˆåç§°</span></span><br><span class="line"><span class="comment">//                 ä¾‹å¦‚è¿™é‡Œçš„ User æœ€ç»ˆä¼šå˜ä¸º users é›†åˆåç§°</span></span><br><span class="line"><span class="comment">//    ç¬¬äºŒä¸ªå‚æ•°ï¼šæ¶æ„ Schema</span></span><br><span class="line"><span class="comment">//   </span></span><br><span class="line"><span class="comment">//    è¿”å›å€¼ï¼šæ¨¡å‹æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let User = mongoose.model('User', userSchema)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> User = mongoose.model(<span class="string">'User'</span>,<span class="keyword">new</span> Schema(&#123;</span><br><span class="line">    username: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    password: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    email: &#123;</span><br><span class="line">      type: <span class="built_in">String</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(User);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. æœ‰äº†æ¨¡å‹æ„é€ å‡½æ•°ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ„é€ å‡½æ•°å¯¹ users é›†åˆä¸­çš„æ•°æ®CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #region /æ–°å¢æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="keyword">let</span> admin = <span class="keyword">new</span> User(&#123;</span><br><span class="line">  username: <span class="string">'Tadm'</span>,</span><br><span class="line">  password: <span class="string">'123456'</span>,</span><br><span class="line">  email: <span class="string">'2873126657@qq.com'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">admin.save(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¿å­˜å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #endregion /æ–°å¢æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #region /æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line">User.find(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">User.find(&#123;</span><br><span class="line">  username: <span class="string">'Tadm'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">User.findOne(&#123;</span><br><span class="line">  username: <span class="string">'Tadm'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line"><span class="comment">// // #endregion /æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line"><span class="comment">// // #region /åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line">User.remove(&#123;</span><br><span class="line">  username: <span class="string">'Tadm'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åˆ é™¤å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åˆ é™¤æˆåŠŸ'</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line"><span class="comment">// // #endregion /åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line"><span class="comment">// // #region /æ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line">User.findByIdAndUpdate(<span class="string">'5e51f28f79148a150c76977d'</span>, &#123;</span><br><span class="line">  password: <span class="string">'123'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ›´æ–°å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ›´æ–°æˆåŠŸ'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// // **********************</span></span><br><span class="line"><span class="comment">// // #endregion /æ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="comment">// // **********************</span></span><br></pre></td></tr></table></figure><p><a href="https://mongoosejs.com/docs/api/model.html" target="_blank" rel="noopener">æ›´å¤šæ“ä½œ API</a></p><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><ul><li>Install</li></ul><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm i mysql -S</span><br></pre></td></tr></table></figure><ul><li>CODE</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åˆ›å»ºè¿æ¥</span></span><br><span class="line"><span class="keyword">let</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host: <span class="string">'localhost'</span>,</span><br><span class="line">  user: <span class="string">'root'</span>,</span><br><span class="line">  password: <span class="string">''</span>,</span><br><span class="line">  database: <span class="string">'users'</span> </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. è¿æ¥æ•°æ®åº“</span></span><br><span class="line">connection.connect();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æ‰§è¡Œæ•°æ®æ“ä½œ</span></span><br><span class="line">connection.query(<span class="string">'SELECT * FROM `users`'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The solution is: '</span>, results)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">connection.query(<span class="string">'INSERT INTO users VALUES(NULL, "Tadm", "123456")'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error</span><br><span class="line">    </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The solution is: '</span>, results)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// update/delete æ“ä½œç›´æ¥å†™ç›¸å…³SQLè¯­å¥å³å¯å¹¶æ”¾å…¥ connection.query() ä¸­æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. å…³é—­è¿æ¥</span></span><br><span class="line">connection.end()</span><br></pre></td></tr></table></figure><h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><blockquote><p>mongoose çš„æ‰€æœ‰ API å‡æ”¯æŒ Promise</p></blockquote><h1 id="Node-è·¯å¾„é—®é¢˜"><a href="#Node-è·¯å¾„é—®é¢˜" class="headerlink" title="Node è·¯å¾„é—®é¢˜"></a>Node è·¯å¾„é—®é¢˜</h1><p>å› ä¸ºåœ¨ node ä¸­<strong>æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„</strong>æ˜¯ç›¸å¯¹äº<strong>å½“å‰æ‰§è¡Œ node å‘½ä»¤çš„æ–‡ä»¶è·¯å¾„</strong>è€Œä¸æ˜¯ç›¸å¯¹äºæ­£åœ¨æ‰§è¡Œçš„æ–‡ä»¶</p><p>å¦‚ä½•è§£å†³ï¼š</p><ul><li>__dirname</li></ul><blockquote><p>åŠ¨æ€è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„</p></blockquote><ul><li>__filename</li></ul><blockquote><p>åŠ¨æ€è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨è·¯å¾„çš„ç»å¯¹è·¯å¾„</p></blockquote><p>ç®€å•è€Œè¨€ï¼šè¿™ä¸¤ä¸ªå±æ€§<strong>å§‹ç»ˆä¿å­˜ç€å½“å‰æ–‡ä»¶çš„(ç»å¯¹)è·¯å¾„ä¿¡æ¯</strong>ï¼Œä¸ node å‘½ä»¤æ‰§è¡Œä½ç½®æ— å…³</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> publicDir = path.join(__dirname, <span class="string">'public'</span>)</span><br><span class="line"><span class="keyword">let</span> filename = path.join(publicDir, req.url)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åªæ˜¯é’ˆå¯¹äºæ–‡ä»¶çš„è·¯å¾„è€Œè¨€ï¼Œæ¨¡å—çš„è·¯å¾„æ ‡è¯†ä¸å—å½±å“ï¼Œè€Œä¸”ç›¸å¯¹è·¯å¾„(â€˜./ ../â€˜)ä¸èƒ½çœç•¥</p><h1 id="Express-session"><a href="#Express-session" class="headerlink" title="Express-session"></a>Express-session</h1><p><a href="https://www.npmjs.com/package/express-session" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm i express-session -S</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author:</span> <span class="post-copyright-info"><a href="mailto:undefined">ğ“£ğ“ªğ“­ğ“¶</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link:</span> <span class="post-copyright-info"><a href="https://liuhongwei3.github.io/2020/02/21/NodeStudy/">https://liuhongwei3.github.io/2020/02/21/NodeStudy/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice:</span> <span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Node/">Node</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/03/21/JavaScriptNotes/"><i class="fa fa-chevron-left"></i> <span>JavaScriptNotes</span></a></div><div class="next-post pull-right"><a href="/2020/02/20/ReactStudyNotesAll/"><span>ReactStudyNotesAll</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image:url(https://i.loli.net/2020/02/28/2OPSFfaL73QIizV.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2020 &nbsp;<i class="fa fa-heart" aria-hidden="true" id="myheart"></i>&nbsp; <a href="https://liuhongwei3.github.io/" target="_blank">ğ“£ğ“ªğ“­ğ“¶</a></div><div class="framework-info"><span>Driven -</span> <a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme -</span> <a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text">Hi,Welcome to my blog,maybe you can find more!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-eye"></i>æœ¬ç¯‡å·²é˜…è¯»æ¬¡æ•°ï¼š<span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/heart.js?version=1.7.0"></script><script src="/js/typed.js?version=1.7.0"></script><script src="/js/google.js?version=1.7.0"></script><script>/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)&&($("#nav").addClass("is-mobile"),$("footer").addClass("is-mobile"),$("#top-container").addClass("is-mobile"))</script></body></html>